(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(60)},58:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a.n(r),i=a(27),c=a.n(i),l=a(6),o=a(7),u=a(11),d=a(8),m=a(12),h=a(10),v=a(2),f=a(29),p=a(16),E={wastes:[],loading:!1},y={},b=Object(v.c)({wastes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_WASTES":case"SEARCH_WASTES":return Object(p.a)({},e,{wastes:t.payload});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}}}),g={},w=[f.a];try{n=Object(v.e)(b,g,Object(v.d)(v.a.apply(void 0,w),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()))}catch(x){n=Object(v.e)(b,g,Object(v.d)(v.a.apply(void 0,w)))}var N=n,O=a(18),S=a(9),k=a(5),j=a.n(k),_=a(17),W=a.n(_),T=function(){return{type:"LOADING"}},R=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={favourites:[],wastes:[],search:"",loading:!0},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.wastes.wastes.map(function(e){var t=j.a.parseHTML(e.body)[0].data;return e.body=t,t.includes("<li>")&&t.includes("<ul>")||(e.body="<ul><li>".concat(t,"</li></ul>")),e});t=this.ensureFavourites(t),this.setState({wastes:t,loading:e.wastes.loading})}},{key:"componentDidMount",value:function(){j()("#search").keypress(function(e){13===e.which&&j()("#searchButton").click()}),this.props.getWastes()}},{key:"handleChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=this;this.setState({loading:!0},function(t){return e.props.searchWastes(e.state)})}},{key:"loading",value:function(){return this.state.loading&&s.a.createElement("div",{className:"text-center"},s.a.createElement("div",{className:"lds-hourglass"}))}},{key:"ensureFavourites",value:function(e){var t=this.state.favourites.map(function(e){return e.title});return e=e.map(function(e){return e.favourited=!!t.includes(e.title),e})}},{key:"displayFavourites",value:function(){var e=this;return this.state.favourites.length>0&&s.a.createElement("div",{className:"jumbotron"},s.a.createElement("div",{className:"container-fluid jumbotron-up"},s.a.createElement("h3",{className:"text-head"},"Favourites"),this.state.favourites.length>0&&this.state.favourites.map(function(t,a){return e.displayWaste(t,a)})))}},{key:"favourite",value:function(e){var t=e.target.id.trim(),a=e.target.className;if("fa fa-star inline default"===a.trim()){var n=this.ensureFavourites(this.state.wastes),r=this.state.wastes.filter(function(e){return e.title.trim()===t}),s=this.state.favourites;e.target.className="".concat(e.target.className," favourite");var i=this.tagFavourites([].concat(Object(O.a)(r),Object(O.a)(s)));this.setState({favourites:i,wastes:n})}if("fa fa-star inline default favourite"===a.trim()){var c=this.ensureFavourites(this.state.wastes);j()("i[name='".concat(e.target.id,"']")).removeClass("favourite"),e.target.className="fa fa-star inline default";var l=this.state.favourites;l=l.filter(function(e){return e.title.trim()!==t}),this.setState({favourites:l,wastes:c})}}},{key:"tagFavourites",value:function(e){return e.map(function(e){return e.favourited=!0,e})}},{key:"displayWaste",value:function(e,t){var a=e.favourited&&!0===e.favourited?"favourite":"";return s.a.createElement("div",{className:"card-group",key:t},s.a.createElement("div",{className:"card contain-div custom"},s.a.createElement("p",{className:"lead inline"},s.a.createElement("i",{name:e.title,id:e.title,onClick:this.favourite.bind(this),className:"fa fa-star inline default ".concat(a),"aria-hidden":"true"}),s.a.createElement("strong",{className:"move-right"},e.title)),s.a.createElement("br",null)),s.a.createElement("div",{className:"card add-margin custom"},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.body}})))}},{key:"displayWastes",value:function(){var e=this;return!this.state.loading&&this.state.wastes.length>0&&this.state.wastes.map(function(t,a){return e.displayWaste(t,a)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"card"},s.a.createElement("nav",{className:"navbar bg-custom text-center"},s.a.createElement("ul",{className:"nav navbar-nav mx-auto"},s.a.createElement("li",{className:"nav-item"},s.a.createElement("h2",null,s.a.createElement("b",{className:"text-white"}," Toronto Waste Lookup "))))),s.a.createElement("br",null),s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"text-center"},s.a.createElement("div",{className:"col-md-10 col-lg-11 col-sm-4 inline"},s.a.createElement("input",{id:"search",name:"search",className:"form-control form-control-lg",type:"text",placeholder:"Search",onChange:this.handleChange.bind(this)})),s.a.createElement("button",{id:"searchButton",className:"btn btn-primary btn-lg bg-search inline","aria-pressed":"true",onClick:this.handleSubmit.bind(this)},s.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"}))),s.a.createElement("br",null)," ",this.loading()," ",s.a.createElement("br",null),s.a.createElement("div",{className:"container-fluid"},this.displayWastes())),s.a.createElement("br",null),this.displayFavourites()))}}]),t}(r.Component),C=Object(h.b)(function(e){return{wastes:e.wastes,errors:e.errors}},{getWastes:function(e){return function(e){e(T()),W.a.get("http://localhost:3001/api/wastes").then(function(t){return e({type:"GET_WASTES",payload:t.data})}).catch(function(t){return e({type:"GET_ERRORS",payload:{}})})}},searchWastes:function(e){var t=e.search;return function(e){e(T()),W.a.get("http://localhost:3001/api/wastes?query=".concat(t)).then(function(t){return e({type:"SEARCH_WASTES",payload:t.data})}).catch(function(t){return e({type:"GET_ERRORS",payload:{}})})}}})(R),F=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(h.a,{store:N},s.a.createElement(C,this.props))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(58);c.a.render(s.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.f51f24e4.chunk.js.map